Index: src/where.c
==================================================================
--- a/src/where.c
+++ b/src/where.c
@@ -1379,10 +1379,12 @@
 #endif /* SQLITE_ENABLE_STAT3_OR_STAT4 */
 
   /* Prevent ON clause terms of a LEFT JOIN from being used to drive
   ** an index for tables to the left of the join.
   */
+  testcase( pTerm!=&pWC->a[idxTerm] );
+  pTerm = &pWC->a[idxTerm];
   pTerm->prereqRight |= extraRight;
 }
 
 /*
 ** This function searches pList for an entry that matches the iCol-th column
